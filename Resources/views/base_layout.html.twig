{%- block sonata_page_html_tag -%}
<!DOCTYPE html>
<html {{ sonata_seo_html_attributes() }}>
{% endblock %}
    {% block sonata_page_head %}
        <head {{ sonata_seo_head_attributes() }}>

            {{ sonata_seo_title() }}
            {{ sonata_seo_metadatas() }}

            {% block sonata_page_stylesheets %}
                <link rel="stylesheet" href="{{ asset('bundles/rmzamorabootstrap/css/bootstrap.css') }}" type="text/css" media="all"  />
                <link rel="stylesheet" href="{{ asset('bundles/rmzamorabootstrap/css/bootstrap-responsive.css') }}" type="text/css" media="all"  />
                <link rel="stylesheet" href="{{ asset('bundles/rzpage/sonata/css/default.css') }}" type="text/css" media="all" />
                {% if sonata_page.isEditor or (app.user is not null and app.security and app.security.isGranted('ROLE_PREVIOUS_ADMIN')) %}
                    {# uncomment this line if you are not using the default twitter bootstrap layout in head tag #}
                    {#
                        <link rel="stylesheet" href="{{ asset('bundles/rmzamorabootstrap/css/bootstrap.css') }}" type="text/css" media="all"  />
                    #}
                    {# modal #}
                    <link href="{{ asset('bundles/rmzamorabootstrap/plugins/modal/css/modal.css') }}" type="text/css" media="all" rel="stylesheet"/>
                    {# gritter #}
                    <link href="{{ asset('bundles/rmzamorajquery/jquery-plugins/gritter/css/gritter.css') }}" type="text/css" media="all" rel="stylesheet"/>

                    {# breadcrumbs #}
                    <link href="{{ asset('bundles/rmzamorajquery/jquery-plugins/breadcrumbs/css/breadcrumb.css') }}" type="text/css" media="all" rel="stylesheet"/>
                    {# chosen #}
                    <link href="{{ asset('bundles/rmzamorajquery/jquery-plugins/chosen/chosen.css') }}" type="text/css" media="all" rel="stylesheet"/>
                    {# tabdrop #}
                    <link href="{{ asset('bundles/rmzamorabootstrap/plugins/tabdrop/css/tabdrop.css') }}" type="text/css" media="all" rel="stylesheet">
                    {# uniform #}
                    <link href="{{ asset('bundles/rmzamorajquery/jquery-plugins/uniform/themes/default/css/uniform.default.css') }}" type="text/css" media="all" rel="stylesheet"/>
                    {# footable #}
                    <link href="{{ asset('bundles/rmzamorajquery/jquery-plugins/foo-table/css/footable.min.css') }}" type="text/css" media="all" rel="stylesheet"/>
                    <link href="{{ asset('bundles/rmzamorajquery/jquery-plugins/foo-table/css/footable.sortable.min.css') }}" type="text/css" media="all" rel="stylesheet"/>
                    {# multiselect #}
                    <link href="{{ asset('bundles/rmzamorajquery/jquery-plugins/multi-select/css/multiselect.css') }}" type="text/css" media="all" rel="stylesheet"/>
                    {# qtip2 #}
                    <link rel="stylesheet" href="{{ asset('bundles/rmzamorajquery/jquery-plugins/qtip2/css/qtip.css') }}" />
                    {# switch #}
                    <link href="{{ asset('bundles/rmzamorabootstrap/plugins/switch/css/switch.css') }}" type="text/css" media="all"  rel="stylesheet">
                    {# selectpicker #}
                    <link href="{{ asset('bundles/rmzamorabootstrap/plugins/select/css/select.css') }}" type="text/css" media="all" rel="stylesheet">
                    {# datepicker #}
                    <link href="{{ asset('bundles/rmzamorabootstrap/plugins/datepicker/css/datepicker.css') }}" type="text/css" media="all" rel="stylesheet">
                    {# timepicker #}
                    <link href="{{ asset('bundles/rmzamorabootstrap/plugins/timepicker/css/timepicker.css') }}" type="text/css" media="all" rel="stylesheet">
                    {# datetimepicker #}
                    <link href="{{ asset('bundles/rmzamorabootstrap/plugins/datetimepicker/css/datetimepicker.css') }}" type="text/css" media="all" rel="stylesheet">
                    {# fileupoad #}
                    <link href="{{ asset('bundles/rmzamorabootstrap/plugins/fileupload/css/fileupload.css') }}" type="text/css" media="all" rel="stylesheet">
                    <link href="{{ asset('bundles/rmzamorajquery/jquery-plugins/icheck/skins/all.css') }}" rel="stylesheet">
                    {# select2 #}
                    <link href="{{ asset('bundles/rmzamorajquery/jquery-plugins/select2/select2.css') }}" rel="stylesheet">

                {% endif %}

                {% block rz_page_theme_stylesheets %}{% endblock %}

                {% if sonata_page.isEditor or (app.user is not null and app.security and app.security.isGranted('ROLE_PREVIOUS_ADMIN')) %}
                    <link rel="stylesheet" href="{{ asset('bundles/rzadmin/css/style.css') }}" type="text/css" media="all">
                    <link rel="stylesheet" href="{{ asset('bundles/rzadmin/css/rz-style.css') }}" type="text/css" media="all">
                    <link rel="stylesheet" href="{{ asset('bundles/rzadmin/css/themes.css') }}" type="text/css" media="all">
                    <link rel="stylesheet" href="{{ asset('bundles/rzadmin/css/rz-theme.css') }}" type="text/css" media="all">

                    {# frontedit #}
                    <link href="{{ asset('bundles/rzadmin/css/font.css') }}" type="text/css" media="all" rel="stylesheet"/>
                    <link href="{{ asset('bundles/rzpage/rzcms/css/rzcms-sidebar.css') }}" type="text/css" media="all" rel="stylesheet"/>
                    <link rel="stylesheet" href="{{ asset('bundles/rzpage/rzcms/css/rzcms-blocks.css') }}" type="text/css" media="all">
                {% endif %}
            {% endblock %}

            {% block sonata_page_javascripts %}
                <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
                <!--[if lt IE 9]>
                <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
                <![endif]-->

                <script src="{{ asset('bundles/rmzamorajquery/jquery/jquery.min.js') }}" type="text/javascript"></script>
                <script src="{{ asset('bundles/rmzamorajquery/jqueryui/js/jqueryui.custom.js') }}" type="text/javascript"></script>
                <script src="{{ asset('bundles/rmzamorabootstrap/js/bootstrap.min.js') }}" type="text/javascript"></script>
                {% if sonata_page.isEditor or (app.user is not null and app.security and app.security.isGranted('ROLE_PREVIOUS_ADMIN')) %}
                    {# hoverintent #}
                    <script src="{{ asset('bundles/rmzamorajquery/jquery-plugins/hoverintent/js/hoverintent.js') }}" type="text/javascript"></script>
                    {# easing #}
                    <script src="{{ asset('bundles/rmzamorajquery/jquery-plugins/easing/js/easing.js') }}" type="text/javascript"></script>
                    {# ckeditor #}
                    <script src="{{ asset('bundles/rzckeditor/ckeditor.js') }}" type="text/javascript"></script>
                    {# blockui #}
                    <script src="{{ asset('bundles/rmzamorajquery/jquery-plugins/blockui/jquery.blockui.min.js') }}" type="text/javascript"></script>
                    <script src="{{ asset('bundles/rzadmin/js/rz/blockui.js') }}" type="text/javascript"></script>
                    <script src="{{ asset('bundles/rzadmin/js/rz/gritter.js') }}" type="text/javascript"></script>
                    {# gritter #}
                    <script src="{{ asset('bundles/rmzamorajquery/jquery-plugins/gritter/js/gritter.js') }}"  type="text/javascript"></script>
                    {# modal #}
                    <script src="{{ asset('bundles/rmzamorabootstrap/plugins/modal/js/modalmanager.js') }}" type="text/javascript"></script>
                    <script src="{{ asset('bundles/rmzamorabootstrap/plugins/modal/js/modal.js') }}" type="text/javascript"></script>
                    {# FOS #}
                    <script src="{{ asset('bundles/fosjsrouting/js/router.js') }}"></script>
                    <script src="{{ path('fos_js_routing_js', {"callback": "fos.Router.setData"}) }}"></script>

                    {# plugins #}
                    {# selectpicker #}
                    <script src="{{ asset('bundles/rmzamorabootstrap/plugins/select/js/select.js') }}" type="text/javascript"></script>
                    {# tabdrop #}
                    <script src="{{ asset('bundles/rmzamorabootstrap/plugins/tabdrop/js/tabdrop.js') }}" type="text/javascript"></script>
                    {# datepicker #}
                    <script src="{{ asset('bundles/rmzamorabootstrap/plugins/datepicker/js/bootstrap-datepicker.js') }}" type="text/javascript"></script>
                    {# timepicker #}
                    <script src="{{ asset('bundles/rmzamorabootstrap/plugins/timepicker/js/timepicker.js') }}" type="text/javascript"></script>
                    {# datetimepicker #}
                    <script src="{{ asset('bundles/rmzamorabootstrap/plugins/datetimepicker/js/datetimepicker.js') }}" type="text/javascript"></script>
                    {# switch #}
                    <script src="{{ asset('bundles/rmzamorabootstrap/plugins/switch/js/switch.js') }}" type="text/javascript"></script>
                    {# modal #}
                    <script src="{{ asset('bundles/rmzamorabootstrap/plugins/modal/js/modalmanager.js') }}" type="text/javascript"></script>
                    <script src="{{ asset('bundles/rmzamorabootstrap/plugins/modal/js/modal.js') }}" type="text/javascript"></script>
                    {# fileupload #}
                    <script src="{{ asset('bundles/rmzamorabootstrap/plugins/fileupload/js/fileupload.js') }}" type="text/javascript"></script>
                    {# uniform #}
                    <script src="{{ asset('bundles/rmzamorajquery/jquery-plugins/form/jquery.form.min.js') }}" type="text/javascript"></script>
                    {# uniform #}
                    <script src="{{ asset('bundles/rmzamorajquery/jquery-plugins/uniform/uniform.js') }}" type="text/javascript"></script>
                    {# chosen #}
                    <script src="{{ asset('bundles/rmzamorajquery/jquery-plugins/chosen/chosen.jquery.min.js') }}" type="text/javascript"></script>
                    {# breadcrumbs #}
                    <script src="{{ asset('bundles/rmzamorajquery/jquery-plugins/breadcrumbs/js/jquery.breadbrumb.min.js') }}" type="text/javascript"></script>
                    {# footable #}
                    <script src="{{ asset('bundles/rmzamorajquery/jquery-plugins/foo-table/js/footable.js') }}" type="text/javascript"></script>
                    {# qtip2 #}
                    <script src="{{ asset('bundles/rmzamorajquery/jquery-plugins/qtip2/js/qtip.js') }}" type="text/javascript"></script>
                    {# multiselect #}
                    <script src="{{ asset('bundles/rmzamorajquery/jquery-plugins/multi-select/js/multiselect.js') }}" type="text/javascript"></script>
                    <script src="{{ asset('bundles/rmzamorajquery/jquery-plugins/multi-select/js/quicksearch.js') }}" type="text/javascript"></script>
                    <script src="{{ asset('bundles/rmzamorajquery/jquery-plugins/icheck/jquery.icheck.min.js') }}" type="text/javascript"></script>
                    <script src="{{ asset('bundles/rmzamorajquery/jquery-plugins/hovercontent/js/contenthover.min.js') }}" type="text/javascript"></script>
                    <script src="{{ asset('bundles/rmzamorajquery/jquery-plugins/select2/select2.js') }}" type="text/javascript"></script>

                    {# sonata #}
                    <script src="{{ asset('bundles/rzadmin/js/lib/sprintf.js') }}" type="text/javascript"></script>
                    <script src="{{ asset('bundles/rzadmin/js/rzadmin-base.js') }}" type="text/javascript"></script>
                    <script src="{{ asset('bundles/rzfieldtype/js/rzadmin-fieldtype.js') }}" type="text/javascript"></script>
                    <script src="{{ asset('bundles/rzdoctrineormadmin/js/rzadmin-many-assoc.js') }}" type="text/javascript"></script>
                    <script src="{{ asset('bundles/rzdoctrineormadmin/js/rzadmin-one-assoc.js') }}" type="text/javascript"></script>
                    {# rz #}
                    <script src="{{ asset('bundles/rzpage/rzcms/js/custom.js') }}" type="text/javascript"></script>
                    <script src="{{ asset('bundles/rzpage/rzcms/js/page.js') }}" type="text/javascript"></script>
                {% endif %}

                {% block rz_page_theme_javascripts %}{% endblock %}
            {% endblock %}
        </head>
    {% endblock %}

    {% block sonata_page_body_tag %}
    <body class="rz-cms{% if sonata_page.isEditor or (app.user is not null and app.security and app.security.isGranted('ROLE_PREVIOUS_ADMIN')) %} rz-cms-edit{% endif %}">
    {% endblock %}

        {% block sonata_page_top_bar %}
            {% if sonata_page.isEditor or (app.user is not null and app.security and app.security.token and app.security.isGranted('ROLE_PREVIOUS_ADMIN')) %}
                {% if sonata_page.isEditor and sonata_page.isInlineEditionOn %}
                    <!-- CMS specific variables -->
                    <script>
                        jQuery(document).ready(function() {
                            Sonata.Page.init({
                                debug: true,
                                rmz_editor_config: {{ rz_ckeditor_config('inline_editor') | json_encode | raw }},
                                url: {
                                    block_save_position: '{{ path('admin_sonata_page_block_savePosition') }}',
                                    block_edit:          '{{ path('admin_sonata_page_block_edit', {'id': 'BLOCK_ID'}) }}',
                                    block_child_edit:    '{{ path('admin_sonata_page_page_block_edit', {'id': 'PAGE_ID', 'childId': 'BLOCK_ID' }) }}',
                                    block_delete:        '{{ path('admin_sonata_page_block_delete', {'id': 'BLOCK_ID'}) }}'
                                }
                            });

                        });
                    </script>
                {% endif %}
                <div class="rzcms-admin-cmsmenu">
                    <div class="arrow-box"><a class="switch-button closed"><div class="arrow-button-container"><i class="icon-cogs"></i></div></a></div>
                    <h6>CMS Administration</h6>
                    <ul>
                        {%  if app.user is not null and app.security and app.security.token and app.security.isGranted('ROLE_SONATA_ADMIN') %}
                            <li><a href="{{ path('sonata_admin_dashboard') }}">{{ "header.sonata_admin_dashboard"|trans({}, 'SonataPageBundle') }}</a></li>
                        {% endif %}
                        {% if sonata_page.isEditor %}
                            {% set sites = sonata_page.siteavailables %}

                            {% if sites|length > 1 and site is defined %}
                                <li class="dropdown">
                                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">{{ site.name }} <i class="icon-chevron-down"></i></a>
                                    <ul class="dropdown-menu">
                                        {% for site in sites %}
                                            <li><a href="{{ site.url }}">{{ site.name }}</a></li>
                                        {% endfor %}
                                    </ul>
                                </li>
                            {% endif %}

                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Page <i class="icon-chevron-down"></i></a>
                                <ul class="dropdown-menu">
                                    {% if page is defined %}
                                        <li><a href="{{ path('admin_sonata_page_page_edit', {'id': page.id }) }}" target="_new">{{ "header.edit_page"|trans({}, 'SonataPageBundle') }}</a></li>
                                        <li><a href="{{ path('admin_sonata_page_page_snapshot_create', {'id': page.id }) }}" target="_new">{{ "header.create_snapshot"|trans({}, 'SonataPageBundle') }}</a></li>
                                        <li class="divider"></li>
                                    {% endif %}

                                    <li><a href="{{ path('admin_sonata_page_page_list') }}" target="_new">{{ "header.view_all_pages"|trans({}, 'SonataPageBundle') }}</a></li>

                                    {% if error_codes is defined and error_codes|length %}
                                        <li class="divider"></li>
                                        <li><a href="{{ path('sonata_page_exceptions_list') }}" target="_new">{{ "header.view_all_exceptions"|trans({}, 'SonataPageBundle') }}</a></li>
                                    {% endif %}
                                </ul>
                            </li>
                            {% if page is defined and not page.enabled %}
                                <li class="page-disabled">Status: <span class="label label-important">{{ 'header.page_is_disabled'|trans([], 'SonataPageBundle') }}</span></li>
                            {% endif %}

                            {% if page is defined %}
                                <li class="action-buttons">
                                    <div class="btn-group" data-toggle="buttons-radio">
                                        <button id="page-action-enabled-preview" class="btn btn-danger active"><i class="icon-eye-open"></i></button>
                                        <button id="page-action-enabled-edit" class="btn btn-danger"><i class="icon-list-alt"></i></button>
                                        <button id="page-action-enabled-editable" class="btn btn-danger"><i class="icon-edit"></i></button>
                                    </div>
                                    <form class="form-inline">
                                        <button type="submit" class="btn btn-success" id="page-action-save-position" style='display:none;' /><i class="icon-save"></i> Position</button>
                                        <button type="submit" class="btn btn-success" id="page-action-save" style='display:none;' /><i class="icon-save"></i> Text Edit</button>
                                    </form>
                                </li>

                                <li class="block-buttons">
                                    <h6>Core CMS Blocks</h6>
                                    <div id="rzcms-admin-blocks" class="carousel slide">
                                        <div class="carousel-inner">
                                            <div class="item active">
                                                <a id="page-action-enabled-preview" class="btn btn-success btn-draggable">Container</a>
                                            </div>
                                            <div class="item">
                                                <a id="page-action-enabled-preview" class="btn btn-success btn-draggable">Text Block</a>
                                            </div>
                                            <div class="item">
                                                <a id="page-action-enabled-preview" class="btn btn-success btn-draggable">Media</a>
                                            </div>
                                            <div class="item">
                                                <a id="page-action-enabled-preview" class="btn btn-success btn-draggable">Featured Media</a>
                                            </div>
                                            <div class="item">
                                                <a id="page-action-enabled-preview" class="btn btn-success btn-draggable">Gallery</a>
                                            </div>
                                        </div><!-- .carousel-inner -->
                                              <!--  next and previous controls here
                                                    href values must reference the id for this carousel -->
                                        <a class="carousel-control left" href="#rzcms-admin-blocks" data-slide="prev"><i class="icon-angle-left"></i></a>
                                        <a class="carousel-control right" href="#rzcms-admin-blocks" data-slide="next"><i class="icon-angle-right"></i></a>
                                    </div><!-- .carousel -->
                                    <!-- end carousel -->
                                </li>

                                <li class="block-buttons">
                                    <h6>Custom Blocks</h6>
                                    <div id="rzcms-admin-blocks-custom" class="carousel slide">
                                        <div class="carousel-inner">
                                            <div class="item active">
                                                <a id="page-action-enabled-preview" class="btn btn-primary btn-draggable">Container</a>
                                            </div>
                                            <div class="item">
                                                <a id="page-action-enabled-preview" class="btn btn-primary btn-draggable">Text Block</a>
                                            </div>
                                            <div class="item">
                                                <a id="page-action-enabled-preview" class="btn btn-primary btn-draggable">Media</a>
                                            </div>
                                            <div class="item">
                                                <a id="page-action-enabled-preview" class="btn btn-primary btn-draggable">Featured Media</a>
                                            </div>
                                            <div class="item">
                                                <a id="page-action-enabled-preview" class="btn btn-primary btn-draggable">Gallery</a>
                                            </div>
                                        </div><!-- .carousel-inner -->
                                              <!--  next and previous controls here
                                                    href values must reference the id for this carousel -->
                                        <a class="carousel-control left" href="#rzcms-admin-blocks-custom" data-slide="prev"><i class="icon-angle-left"></i></a>
                                        <a class="carousel-control right" href="#rzcms-admin-blocks-custom" data-slide="next"><i class="icon-angle-right"></i></a>
                                    </div><!-- .carousel -->
                                          <!-- end carousel -->
                                </li>
                            {% endif %}

                        {% endif %}
                    </ul>
                    <div class="clearfix"></div>
                </div>
            {% endif %}
        {% endblock %}

        {% block sonata_page_container %}{% endblock %}

        {% block sonata_page_asset_footer %}
            {% if page is defined %}
                <script>
                    {{ page.javascript|raw }}
                </script>

                <style>
                    {{ page.stylesheet|raw }}
                </style>
            {% endif %}
            {#
                These includes can be done only at this point as all blocks are loaded,
                Limition : this does not work if a global page is loaded from an ESI tag inside a container block
            #}
            {{ sonata_block_include_stylesheets('screen') }}
            {{ sonata_block_include_javascripts('screen') }}
        {% endblock %}
    {% block sonata_page_body_tag_close %}
    </body>
    {% endblock %}
{%- block sonata_page_html_tag_close -%}
</html>
{% endblock %}
